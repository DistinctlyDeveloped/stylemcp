# 2026-01-31 Session Notes

## Telegram Group Agents Setup
Configured 3 project-specific agents bound to Telegram groups:
- **StyleMCP** → group `-5160071144`
- **InstantContent** → group `-1003725689225`
- **GlowScript** → group `-1003788913652`

Disabled trigger-only mode: `channels.telegram.groups."*".requireMention: false`

Each workspace set up with AGENTS.md, SOUL.md, MEMORY.md, PROJECT.md, etc.

## Distinctly Developed Auth Overhaul
Replaced HTTP Basic Auth with JWT authentication:
- **Username:** robert
- **Password:** MissionControl2026!
- JWT tokens expire in 7 days
- Token endpoint: POST /api/auth/login
- All API calls use `Authorization: Bearer <token>`
- JWT secret in `/etc/mission-control.env` on VPS (chmod 600)

Also fixed:
- Data folder permissions (was blocking writes)
- Added rate limiting (100 req/15min, 5 login attempts/15min)
- Input validation on DELETE/PUT endpoints
- Added logout button
- Removed hardcoded API token from login.html

## Cron Jobs Fixed
Old broken pattern: `kind: "systemEvent"` + `sessionTarget: "main"` (just queued messages)
New working pattern: `kind: "agentTurn"` + `sessionTarget: "isolated"` (spawns session, executes)

All 22 cron jobs now properly configured.

## New Automated Loops

### Hourly Quality Control (at :00)
- Scans: StyleMCP, InstantContent, GlowScript, DistinctlyDeveloped
- 6-phase process with Codex cross-validation
- Reports to `~/clawd/memory/qc-reports/`
- Sends project-specific findings to each Telegram group

First scan results (Jan 31, 9 AM):
- StyleMCP: ✅ Clean
- InstantContent: ⚠️ 25 lint issues (17 errors, 8 warnings)
- GlowScript: ⚠️ ~30 lint issues (unused vars, type assertions)
- DistinctlyDeveloped: ✅ Clean

### Hourly Enhancement Discovery (at :30)
- Same projects, focuses on improvements not bugs
- Must improve: performance, maintainability, reliability, security, UX, or cost
- Excludes: bug fixes, style-only changes, speculative ideas
- Reports to `~/clawd/memory/enhancement-reports/`
- Sends to project Telegram groups

## DD API Token for Cron Jobs
To update dashboard via API:
```bash
TOKEN=$(curl -s -X POST 'https://distinctlydeveloped.com/api/auth/login' \
  -H 'Content-Type: application/json' \
  -d '{"username":"robert","password":"MissionControl2026!"}' | jq -r '.token')

curl -X PUT "https://distinctlydeveloped.com/api/dashboard" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"lastCheck": {...}}'
```

## Key Lesson
Robert: "Why would you ask if I want you to fix things you know need to be fixed?"
→ Don't ask permission for obvious fixes. Just do it.

- Assistant name set: Bob (2026-01-31)

## OpenClaw Migration & Full Control Setup (Evening)

### Migration from clawdbot
- Archived `~/.clawdbot/clawdbot.json` → `clawdbot.json.bak.pre-openclaw`
- Uninstalled clawdbot CLI (673 packages removed)
- Config path: `/Users/bobbuilder/.openclaw/openclaw.json`
- All browser profiles renamed from `clawd` → `openclaw`

### Model & Capabilities
- **Model:** `anthropic/claude-opus-4-5-20251101` (Claude Max subscription)
- **Full exec control:** `exec.security: "full"`, `exec.elevatedOnHost: true`
- **Heartbeat hours:** 8am-11pm CST
- **TTS:** Disabled (`messages.tts.auto: "off"`)

### Mac Studio Node Pairing
- All permissions granted: screen recording, accessibility, camera, microphone, notifications, AppleScript
- Node available for browser automation and system control

### Browser Profile Consolidation
- Only 2 profiles available: `openclaw`, `chrome`
- All 6 Twitter posting jobs updated to use `openclaw` profile
- `browser.headless: false` for manual login capability

### Twitter Account Logins
- **@style_mcp:** Was already logged in
- **@InstantContent_:** Logged in manually with 2FA (admin@instantcontent.ai)

### Cron Job Reorganization
- Moved hourly-quality-control and hourly-enhancement-discovery from stylemcp agent → main agent
- Rationale: Multi-project jobs belong under main, not project-specific agents
- 21 jobs under main, 1 under glowscript (Zenoti sync)

### Still Pending
- Update 2 engagement jobs (stylemcp-engagement, stylemcp-reddit-engagement) to use `openclaw` profile (gateway timeout during attempt)
- Archive GlowScript migration scripts (`scripts/zenoti-migration/` → `scripts/archive/`)

### CLI Notes (added to TOOLS.md)
- **Claude CLI:** Requires `pty=true` - crashes without terminal
- **Codex CLI:** Works normally
- **Other CLIs verified:** Supabase, Vercel, GitHub, Shopify

### Twitter Account Credentials
- **@style_mcp:** bob@distinctlydeveloped.com / Xy#7$mK9!pL2@vNq
- **@InstantContent_:** admin@instantcontent.ai / Z~$Q!2%~i3vXFb#

## Email Monitoring Check (8:10 PM)

**GitHub CI Failures (non-critical):**
- instantcontent: Type Check & Lint failed (11 annotations) - https://github.com/3DUNLMTD/instantcontent/actions/runs/21554692762
- GlowScript: TypeScript & Schema Sync failed (1 annotation) - https://github.com/3DUNLMTD/GlowScript/actions/runs/21554692789

**Supabase Security Warnings (Jan 30):**
- GlowScript: 1 error - https://supabase.com/dashboard/project/nahoveqktauszcsuybeo/database/security-advisor
- Video Circles: 1 error - https://supabase.com/dashboard/project/ujofqtckyloewmsgrxjw/database/security-advisor

No Stripe issues, no critical errors, no customer emergencies. Not pinging on Saturday night.
